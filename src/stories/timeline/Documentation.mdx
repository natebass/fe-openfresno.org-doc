import * as TimelineStories from "./Timeline.stories";
import { Meta } from "@storybook/addon-docs/blocks";

<Meta of={TimelineStories} />

# Timeline

A responsive, multi-step timeline component for displaying a list of opportunities. This component renders a vertical timeline that transitions from a single-column layout on mobile to an alternating two-column layout on desktop. the styling and layout logic are fully described in the associated css file's comments.

### Experimental Features ⚠️

**Move timeline on scroll:**

This effect uses CSS scroll-driven animations. **It is not supported by older browsers** (e.g., Chrome < 115, Firefox, Safari). On unsupported platforms, it functions the same as if fade were set to false.

## Props

- **props \{object\}** - All properties.
  <br />
- **className \{string\}** - Optional css classes to apply to the root div element.
  <br />

# Timeline Item

A responsive component for displaying a single volunteer opportunity.
This component renders single slice of a vertical timeline that transitions
from a single-column layout on mobile to an alternating two-column layout on
desktop. The styling and layout logic are fully described in the associated
CSS file's comments.

## Props

- **props \{object\}** – All properties. <br />

- **number \{integer\}** – The number to display. <br />

- **heading \{string\}** – The heading text to display. <br />

- **buttons \{SimpleButton[]\}** – A list of buttons to display, with adaptive rendering for single buttons and pairs of buttons. <br />

- **updateTimelineNumbers \{(number: integer, boundingRect: DOMRect) => null \}** – A callback function from the parent to get the position of the timeline number for animation purposes. <br />

- **sectionType \{SectionType\}** – The SectionType to modify display styling. <br />

- **children \{JSX.Element\}** – The text to display within the timeline column. Inserted using `<TimelineItem ...props> ...children</TimelineItem>`. <br />

# Responsive Timeline Layout Specification

This needs to be updated.

This document details the structure and CSS methodology for creating a mobile-first, responsive vertical timeline. The layout adjusts significantly based on the viewport width (at the $\mathbf{768}$px breakpoint).

## Mobile Layout (≤768px)

On mobile devices, the timeline collapses into a single-column stack. All content is centered, and the vertical line is aligned to the left side of the container.

### Layout Structure

<table>
  <thead>
    <tr>
      <th>Element</th>
      <th>Description</th>
      <th>Styling Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <strong>Line</strong>
      </td>
      <td>
        Vertical timeline connector (via <code>.timeline::before</code>).
      </td>
      <td>
        Positioned at <strong>20px</strong> from the left edge; width is{" "}
        <strong>1px</strong>.
      </td>
    </tr>
    <tr>
      <td>
        <strong>Top Circle</strong>
      </td>
      <td>
        Start point indicator (via <code>.timeline::after</code>).
      </td>
      <td>
        Small circle <strong>12px</strong> diameter).
      </td>
    </tr>
    <tr>
      <td>
        <strong>
          Item Number (<em>#n</em>)
        </strong>
      </td>
      <td>
        The numbered circle (<code>.timeline-number</code>).
      </td>
      <td>
        <strong>5px</strong> diameter, positioned near the vertical line.
      </td>
    </tr>
    <tr>
      <td>
        <strong>Content</strong>
      </td>
      <td>
        Title and body text (<code>.timeline-item-content</code>).
      </td>
      <td>
        <strong>Full width</strong> containment with <strong>centered</strong>{" "}
        text.
      </td>
    </tr>
  </tbody>
</table>

### CSS Flex Orientation

- The `.timeline-item` container is **column-oriented**.

- All items stack vertically, and the alternating (odd/even) alignment is not applicable.

## Desktop Layout (≥768px)

On desktop viewports, the vertical line moves to the center, and content alternates between the left and right sides, creating a two-column effect.

### Layout Structure

<table>
  <thead>
    <tr>
      <th>Element</th>
      <th>Description</th>
      <th>Styling Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <strong>Line</strong>
      </td>
      <td>
        Vertical timeline connector (via <code>.timeline::before</code>).
      </td>
      <td>
        Positioned at <strong>50%</strong> width (center); thickness is{" "}
        <strong>1.5px</strong>.
      </td>
    </tr>
    <tr>
      <td>
        <strong>Top Circle</strong>
      </td>
      <td>
        Start point indicator (via <code>.timeline::after</code>).
      </td>
      <td>
        Large circle (<strong>36px</strong> diameter), centered at{" "}
        <strong>50%</strong>.
      </td>
    </tr>
    <tr>
      <td>
        <strong>Content Width</strong>
      </td>
      <td>
        The width of the text block (<code>.timeline-item-content</code>).
      </td>
      <td>
        Calculated width: <code>width: calc(50% - 128px)</code> to allow space
        for the numbered circle near the center line. Text is{" "}
        <strong>left-aligned</strong>.
      </td>
    </tr>
  </tbody>
</table>

### Item Alternation Logic

The `.timeline-item` container is **row-oriented** and uses flex justification to position content blocks:

- **Odd Items:** Content is placed on the **right side** of the line (use `justify-content: flex-end` on the container).

- **Even Items:** Content is placed on the **left side** of the line (use `justify-content: flex-start` on the container).

- The `.timeline-number` ($\mathbf{5}$rem circle) sits near the center line, using margins to align correctly on both sides.

## Key CSS Selectors and Counter Logic

### Core Selectors

<table>
  <thead>
    <tr>
      <th>Selector</th>
      <th>Role</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <strong>.timeline::before</strong>
      </td>
      <td>Vertical Line</td>
      <td>Responsible for the main vertical divider.</td>
    </tr>
    <tr>
      <td>
        <strong>.timeline::after</strong>
      </td>
      <td>Top Circle</td>
      <td>Acts as the visual starting point for the timeline.</td>
    </tr>
    <tr>
      <td>
        <strong>.timeline-item</strong>
      </td>
      <td>Item Container</td>
      <td>
        The flex container that manages the column (mobile) or row (desktop)
        orientation.
      </td>
    </tr>
    <tr>
      <td>
        <strong>.timeline-item-content</strong>
      </td>
      <td>Text Block</td>
      <td>Contains the title and body text; its width is responsive.</td>
    </tr>
    <tr>
      <td>
        <strong>.timeline-number</strong>
      </td>
      <td>Numbered Circle</td>
      <td>Displays the CSS-generated counter value for the event.</td>
    </tr>
  </tbody>
</table>

### CSS Counter Implementation

The item numbering (#1,#2,…) is handled using CSS counters:

1. **Initialize the Counter (on the parent container):**

```
.timeline {
  counter-reset: timeline-counter;
}
```

2. **Increment the Counter (on each item):**

```
.timeline-item {
  counter-increment: timeline-counter;
}
```

3. **Apply Content Width Calculation (Desktop):**

```
.timeline-item-content {
  width: calc(50\% - 128px); /* 128px leaves room for the number circle + margins */
}
```
